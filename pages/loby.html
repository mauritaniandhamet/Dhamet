<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="light dark" />
  <title data-i18n="lobby.title">قائمة الغرف واللاعبين المتصلين</title>

  <link rel="icon" type="image/svg+xml" href="../assets/icons/icon.svg" />
  <link rel="icon" type="image/png" href="../assets/icons/icon.png" />
<link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/pages.css" />
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="../js/firebase.config.js"></script>

  <script src="../js/i18n.js"></script>
<script src="../js/modal.js"></script>
  <script src="../js/app.bundle.js"></script>
  <script src="../js/online.js"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PZJ0X3E4KD');
</script>
</head>
<body>
  <main class="z-page z-lobby-page z-vcenter">
    <div class="z-page-inner z-lobby-inner">
      <div class="z-lobby-head">
        <div class="z-lobby-head-left" aria-hidden="true"></div>
<div class="z-lobby-head-center">
          <h1 class="z-page-title" data-i18n="lobby.title">قائمة الغرف واللاعبين المتصلين</h1>
          <p class="z-lobby-subtitle" data-i18n="lobby.subtitle">اختر غرفة للمشاهدة أو دعوة لاعب لبدء مباراة.</p>
        </div>

        <div class="z-lobby-head-right" aria-hidden="true"></div>
      </div>

      <div class="z-lobby-cols">
        <section class="z-lobby-panel" data-i18n-aria-label="aria.lobbyRooms">
          <h2 class="z-lobby-h2" data-i18n="lobby.rooms">الغرف</h2>
          <div id="roomsList" class="z-lobby-list rooms">
            <div class="z-empty" data-i18n="lobby.emptyRooms">لا توجد غرف جارية.</div>
          </div>
        </section>

        <section class="z-lobby-panel" data-i18n-aria-label="aria.lobbyPlayers">
          <h2 class="z-lobby-h2" data-i18n="lobby.players">اللاعبون المتصلون</h2>
          <div id="playersList" class="z-lobby-list players">
            <div class="z-empty" data-i18n="lobby.emptyPlayers">لا يوجد لاعبون متصلون.</div>
          </div>
        </section>
      </div>


      <div class="z-lobby-bottom">
        <a class="btn small secondary z-lobby-back" href="./mode.html">
          <img class="btn-ico" src="../assets/icons/chevron-left.svg" alt="" aria-hidden="true" />
          <span data-i18n="lobby.backToMode">العودة إلى اختيار نمط اللعب</span>
        </a>
      </div>
    </div>
  </main>

  <script>
    // Ensure user has at least anonymous identity for PvP browsing (safe if Firebase is unavailable).
    (function(){
      try{
        if (window.ZAuth && ZAuth.ensureAnonymousAuth) {
          ZAuth.ensureAnonymousAuth().then(function(){});
        }
      }catch(e){}
    })();
  </script>

  <script>
    // Bind lobby lists (rooms + players) via Online module.
    window.addEventListener('load', function(){
      try{
        if (window.Online && typeof Online.initLobbyPage === 'function') {
          Online.initLobbyPage({
            roomsListId: 'roomsList',
            playersListId: 'playersList'
          });
        }
      }catch(e){
        try { window.popup && popup('تعذر تهيئة اللوبي.'); } catch(_) {}
      }
    });
  </script>

  <div id="zModalRoot" style="display:none"></div>
</body>
</html>
